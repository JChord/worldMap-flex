<?xml version="1.0" encoding="utf-8"?>
<s:Application xmlns:fx="http://ns.adobe.com/mxml/2009" 
			   xmlns:s="library://ns.adobe.com/flex/spark" 
			   minWidth="560" minHeight="470"
			   xmlns:views="views.*"
			   creationComplete="handleCreationComplete(event)">
	
	<fx:Declarations>
		<fx:XML id="mapData" source="assets/mapData.xml" />
        <fx:XML id="areaData" source="assets/areaData.xml"/>
	</fx:Declarations>
	<fx:Script>
		<![CDATA[
			import mx.collections.ArrayCollection;
			import mx.events.FlexEvent;
			
			import valueObjects.Area;
			
			[Bindable]
			public var areas:ArrayCollection;
			
			
			private function handleCreationComplete ( event:FlexEvent ) : void {
				var areasArray:Array = new Array();
				var mapDataList:XMLList = mapData.areas[0]..area;
                var areaDataList:XMLList = areaData..areaData;
				for each ( var mapDataXML:XML in mapDataList ) {
					var area:Area = Area.buildAreaFromAttributes(mapDataXML, areaDataList);
					areasArray.push( area );
				}
				
				areas = new ArrayCollection( areasArray );
				
			}
		]]>
	</fx:Script>
	
	<views:AreaView id="areaGroup" 
						width="100%" height="100%"
						areasData="{areas}"/>
</s:Application>
